#!/usr/bin/env bash
# vim: ft=sh sw=2 et

set -euo pipefail

TMP_FILE=$(mktemp)

cat $($SNACK build) | jq -M 'keys' > $TMP_FILE

diff golden.jq $TMP_FILE

# TODO: enable this once supported
#capture_io "$TMP_FILE" someFunc | $SNACK ghci
#diff golden $TMP_FILE

rm $TMP_FILE
